<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Your Crisis Alerts - MindTrack</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/users.css">
    <style>
        .page {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .page-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #2c3e50;
        }
        .card {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .user-alert {
            border-left: 4px solid #dc3545;
        }
        .crisis-title {
            color: #dc3545;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        .crisis-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #fff3cd;
            border-radius: 0.25rem;
        }
        .resource-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin: 1.5rem 0 0.75rem;
            color: #2c3e50;
        }
        .resources {
            list-style: none;
            padding: 0;
        }
        .resources li {
            margin-bottom: 0.75rem;
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 0.25rem;
            border-left: 3px solid #007bff;
        }
        .resources a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
        }
        .resources a:hover {
            text-decoration: underline;
        }
        .no-alerts {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
        }
        .alert-date {
            color: #6c757d;
            font-size: 0.875rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #dee2e6;
        }
        .severity-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 700;
            background: #dc3545;
            color: white;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="page">

<h2 class="page-title">Support Alerts</h2>

<div th:if="${alerts.isEmpty()}" class="no-alerts">
    <p>You have no active alerts. We're here if you need support.</p>
</div>

<div th:each="alert : ${alerts}" class="card user-alert">

    <span class="severity-badge" th:text="${alert.severity}">WARNING</span>

    <div th:if="${alert.crisisConfirmed}">
        <h3 class="crisis-title">You're Going Through a Hard Time</h3>
        <p th:text="${alert.adminMessage}" class="crisis-text">
            We noticed you might be struggling. Please reach out to someone you trust or use the resources below.
        </p>

        <p class="resource-title">Helpful Resources:</p>
        <ul class="resources">
            <li>
                <a href="tel:115">Call Umang 24/7 Helpline</a>
                <div>24/7 crisis support</div>
            </li>
            <li>
                <a href="https://rozan.org" target="_blank">Rozan Counseling Services</a>
                <div>Professional mental health support</div>
            </li>
            <li>
                <a href="https://taskeen.org/" target="_blank">Taskeen Mental Health Services</a>
                <div>International emotional support</div>
            </li>
            <li>
                <a href="https://counseling.pk/" target="_blank">More Pakistan Resources</a>
                <div>Additional local support options</div>
            </li>
        </ul>

        <div class="alert-date">
            Alert created: <span th:text="${#temporals.format(alert.createdAt, 'MMM dd, yyyy - hh:mm a')}"></span>
        </div>
    </div>

    <div th:unless="${alert.crisisConfirmed}">
        <h3 style="color: #856404; font-size: 1.25rem; margin-bottom: 0.5rem;">Check-in Notice</h3>
        <p th:text="${alert.message}" style="color: #333;">
            We wanted to check in with you based on recent activity.
        </p>
        <p style="margin-top: 1rem; color: #6c757d; font-size: 0.95rem;">
            If you're struggling, please don't hesitate to reach out for support.
        </p>

        <div class="alert-date">
            Alert created: <span th:text="${#temporals.format(alert.createdAt, 'MMM dd, yyyy - hh:mm a')}"></span>
        </div>
    </div>

</div>

</body>
</html>